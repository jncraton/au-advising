#!/usr/bin/python3

import pandas as pd


def scrape_table_to_markdown(url):
    """Fetch tables from url and return as markdown string."""
    try:
        tables = pd.read_html(url)
        if not tables:
            return "No tables found"

        markdown_tables = []
        for table in tables:
            markdown_tables.append(table.to_markdown(index=False))

        return "\n\n".join(markdown_tables)
    except Exception as e:
        return f"Error scraping tables: {e}"


if __name__ == "__main__":
    for term in ["2261", "2263"]:
        target_url = (
            f"https://basilisk.anderson.edu:4500/under_graduates.aspx?ListBox3={term}"
        )

        with open(f"terms/{term}.md", "w") as f:
            f.write(scrape_table_to_markdown(target_url))
